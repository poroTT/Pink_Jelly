<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{layout/basic.html}">

<head>
    <meta charset="UTF-8">
    <title>CatsMe</title>
    <link rel="stylesheet" th:href="@{/css/mainBoard.css}">

</head>
<body>
<div layout:fragment="banner">
    <!-- 배너 start -->
    <div class="site-cover site-cover-sm same-height overlay single-page" style="background-image: url('/images/mainBoard/banner1.jpg');">
        <div class="container">
            <div class="row same-height justify-content-center">
                <div class="col-md-6">
                    <div class="post-entry text-center">
                        <h1 class="mb-4">CatsMe</h1>
                        <div class="post-meta align-items-center text-center">
                            <figure class="author-figure mb-0 me-3 d-inline-block">
                                <img th:src="|/upload/profileView/${catsMeBoard.dateString}/${catsMeBoard.profileImg}|" alt="Image" class="img-fluid">
                            </figure>
                            <a th:href="|@{/profile/friendProfile(memberId=${catsMeBoard.memberId})}|">
                                <span class="d-inline-block mt-1 boardNickName">[[${catsMeBoard.nickName}]]</span>
                                <span class="boardMemberId">([[${catsMeBoard.memberId}]])</span>
                            </a>
                            <span>[[${#temporals.format(catsMeBoard.addDate, 'yyyy-MM-dd HH:mm')}]]</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /배너 end -->
</div>


<div layout:fragment="content">
    <div class="post-content-body">
        <div class="row my-4 mainBoard-Img">
            <div class="col-md-12 mb-4">
                <img class="img-fluid round"
                     th:each="catsMeImg : ${catsMeBoard.catsMeImg}"
                     th:src="@{|/upload/catsMeBoardView/${catsMeBoard.boardDateString[0]}/${catsMeImg}|}" alt="Image placeholder">
            </div>
        </div>
    </div>
    <div class="row blog-entries element-animate">
        <!-- main-content start -->
        <div class="col-md-12 col-lg-8 main-content">
            <div class="post-content-body">
                <div>[[${catsMeBoard.content}]]</div>
            </div>
            <div class="pt-5">
                <p>Categories:  <a href="#">Food</a>, <a href="#">Travel</a>  Tags: <a href="#">#manila</a>, <a href="#">#asia</a></p>
            </div>
            <a th:href="|@{/catsMe}|" class="btn btn-primary">목록</a>

            <th:block th:if="${#authentication.principal != 'anonymousUser'}">
                <a th:if="${#authentication.principal.mno == catsMeBoard.mno}" class="btn btn-success modifyBtn">수정</a>
                <a th:if="${#authentication.principal.mno == catsMeBoard.mno}" class="btn btn-danger deleteBtn">삭제</a>
            </th:block>
            <!-- comment-wrap start -->
            <div class="pt-5 comment-wrap">
                <h3 class="mb-5 heading">입양소는 댓글을 사용할 수 없습니다.</h3>
            </div>
        </div>
        <!-- END main-content -->
    </div>
</div>
<script layout:fragment="script" th:inline="javascript">
    // 탈퇴한 회원일경우
    let isDel;
    isDel   =  [[${isDel}]];
    console.log(isDel);

    if(isDel === true){
        alert('탈퇴한 계정입니다');
    }
    const cmbNo = [[${catsMeBoard.cmbNo}]];
    const modifyBtn = document.querySelector('.modifyBtn');
    const deleteBtn = document.querySelector('.deleteBtn');
    modifyBtn.addEventListener('click', function() {
        if(!confirm("게시글을 수정하시겠습니까?")){
        }
        window.location.href = "/catsMe/board/modify?cmbNo=" + cmbNo;
    });
    deleteBtn.addEventListener('click', function() {
        if(!confirm("게시글을 삭제하시겠습니까?")) {
        }
        window.location.href = "/catsMe/board/remove?cmbNo=" + cmbNo;
    })
</script>
</body>
</html>